# Requirements Document

## Introduction

WebエンジニアのCV（履歴書）を管理するシステムです。複数のエンジニアのCVをMySQLデータベースに保存し、Web画面とExcelファイルの両方で公開できます。公開する情報は選択可能で、システムオーナーと一般ユーザーの2種類の権限で管理します。

## Requirements

### Requirement 1: ユーザー認証と権限管理

**User Story:** システム管理者として、システムオーナー権限と一般ユーザー権限を持つアカウントを管理したい。これにより、適切なアクセス制御を実現できる。

#### Acceptance Criteria

1. WHEN ユーザーがログインする THEN システム SHALL Google OAuth 2.0で認証を行う
2. WHEN 認証が成功する THEN システム SHALL ユーザーのGoogleアカウント情報を取得してユーザーの権限レベル（システムオーナーまたは一般ユーザー）を識別する
3. WHEN 初回ログインユーザーの場合 THEN システム SHALL 新規ユーザーとしてデータベースに登録する
4. WHEN システムオーナーがログインする THEN システム SHALL 全てのCV情報へのアクセスと編集権限を付与する
5. WHEN 一般ユーザーがログインする THEN システム SHALL 自分のCV情報のみへのアクセスと編集権限を付与する
6. WHEN 未認証ユーザーがシステムにアクセスする THEN システム SHALL Google OAuth認証画面にリダイレクトする

### Requirement 2: CV情報の登録と管理

**User Story:** エンジニアとして、自分のCV情報をシステムに登録・更新したい。これにより、最新の経歴情報を維持できる。

#### Acceptance Criteria

1. WHEN ユーザーがCV登録画面にアクセスする THEN システム SHALL 以下の情報入力フォームを表示する
   - 基本情報（氏名、メールアドレス、電話番号、住所）
   - 職務経歴（会社名、期間、役職、業務内容、使用技術）
   - スキル情報（技術スタック、習熟度、経験年数）
   - 学歴（学校名、学部・学科、卒業年）
   - 資格・認定
   - プロジェクト実績
2. WHEN ユーザーがCV情報を入力して保存する THEN システム SHALL 入力内容をバリデーションしてMySQLデータベースに保存する
3. WHEN 必須項目が未入力の場合 THEN システム SHALL エラーメッセージを表示して保存を拒否する
4. WHEN ユーザーが既存のCV情報を編集する THEN システム SHALL 現在の情報を表示して編集を許可する
5. WHEN システムオーナーがアクセスする THEN システム SHALL 全ユーザーのCV情報の閲覧・編集を許可する
6. WHEN 一般ユーザーがアクセスする THEN システム SHALL 自分のCV情報のみの閲覧・編集を許可する

### Requirement 3: 公開情報の選択機能

**User Story:** エンジニアとして、CV情報の中から公開する項目を選択したい。これにより、状況に応じて適切な情報のみを公開できる。

#### Acceptance Criteria

1. WHEN ユーザーがCV情報を登録・編集する THEN システム SHALL 各項目に対して公開/非公開を選択できるチェックボックスを表示する
2. WHEN ユーザーが公開設定を変更する THEN システム SHALL 変更内容をデータベースに保存する
3. WHEN CV情報を公開する THEN システム SHALL 公開設定が有効な項目のみを出力する
4. WHEN 基本情報の一部が非公開に設定されている THEN システム SHALL その項目を出力から除外する
5. WHEN 職務経歴の特定のエントリが非公開に設定されている THEN システム SHALL そのエントリを出力から除外する

### Requirement 4: Web公開機能

**User Story:** 採用担当者として、エンジニアのCV情報をWeb画面で閲覧したい。これにより、ブラウザから簡単に情報を確認できる。

#### Acceptance Criteria

1. WHEN ユーザーがCV一覧画面にアクセスする THEN システム SHALL 登録されているエンジニアの一覧を表示する
2. WHEN システムオーナーがCV一覧にアクセスする THEN システム SHALL 全てのエンジニアのCVを表示する
3. WHEN 一般ユーザーがCV一覧にアクセスする THEN システム SHALL 自分のCVのみを表示する
4. WHEN ユーザーが特定のエンジニアを選択する THEN システム SHALL そのエンジニアの公開設定されたCV情報を整形して表示する
5. WHEN CV詳細画面を表示する THEN システム SHALL レスポンシブデザインで見やすいレイアウトを提供する
6. WHEN 非公開に設定された項目がある THEN システム SHALL その項目を画面に表示しない

### Requirement 5: Excel出力機能

**User Story:** 採用担当者として、エンジニアのCV情報をExcelファイルでダウンロードしたい。これにより、オフラインでの閲覧や印刷が容易になる。

#### Acceptance Criteria

1. WHEN ユーザーがCV詳細画面でExcel出力ボタンをクリックする THEN システム SHALL 公開設定されたCV情報をExcel形式でダウンロードする
2. WHEN Excelファイルを生成する THEN システム SHALL 読みやすいフォーマットで情報を整形する
3. WHEN Excelファイルを生成する THEN システム SHALL 各セクション（基本情報、職務経歴、スキルなど）を適切なシートまたはセクションに分割する
4. WHEN 非公開に設定された項目がある THEN システム SHALL その項目をExcelファイルに含めない
5. WHEN システムオーナーが複数のCVを一括出力する THEN システム SHALL 選択された複数のエンジニアのCV情報を1つのExcelファイルにまとめる


